apiVersion: v1
data:
  identity: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JRzJBZ0VBTUJBR0J5cUdTTTQ5QWdFR0JTdUJCQUFpQklHZU1JR2JBZ0VCQkRCemdNcDRlZzlKUVNEaXR0V08KNERWR3A4S21ZV1N0N2lrRFdoTzZmd3hKYytPakorZkZXQm1aZlBGQVRjTFZTZ1doWkFOaUFBU3hmR0MySUdGNgpTNlU5ZU9IeWVWVDk2MWJiajMyZ0dxLzNCcExRcnFnRm0zRTdWck9jSzhmSmNaVjNjckNxbElXbEM4UDQyVUU5CjZYcTZLdVlMdHFCQ0JyWW5sZ2xOS1g1T2pjbHJ2UU9DaWEyOU9NSnhQVkk0YTNVb0RUeVpZSEk9Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K
  identity.pub: ZWNkc2Etc2hhMi1uaXN0cDM4NCBBQUFBRTJWalpITmhMWE5vWVRJdGJtbHpkSEF6T0RRQUFBQUlibWx6ZEhBek9EUUFBQUJoQkxGOFlMWWdZWHBMcFQxNDRmSjVWUDNyVnR1UGZhQWFyL2NHa3RDdXFBV2JjVHRXczV3cng4bHhsWGR5c0txVWhhVUx3L2paUVQzcGVyb3E1Z3Uyb0VJR3RpZVdDVTBwZms2TnlXdTlBNEtKcmIwNHduRTlVamhyZFNnTlBKbGdjZz09Cg==
  known_hosts: Z2l0aHViLmNvbSBlY2RzYS1zaGEyLW5pc3RwMjU2IEFBQUFFMlZqWkhOaExYTm9ZVEl0Ym1semRIQXlOVFlBQUFBSWJtbHpkSEF5TlRZQUFBQkJCRW1LU0VOalFFZXpPbXhrWk15N29wS2d3RkI5bmt0NVlScllNak51RzVOODd1UmdnNkNMcmJvNXdBZFQveTZ2MG1LVjBVMncwV1oyWUIvKytUcG9ja2c9CmdpdGh1Yi5jb20gc3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FDajduZE54UW93Z2NRbmpzaGNMcnFQRWlpcGhudCtWVFR2RFA2bUhCTDlqMWFOVWtZNFVlMWd2d25HTFZsT2hHZVlyblphTWdSSzYrUEtDVVhhRGJDN3F0Ylc4Z0lraEw3YUdDc09yL0M1NlNKTXkvQkNaZnhkMW5XekFPeFNEUGdWc21lck9CWWZOcWx0VjkvaFdDcUJ5d0lOSVIrNWRJZzZKVEo3MnBjRXBFamNZZ1hrRTJZRUZYVjFKSG5zS2diTFdObGhTY3FiMlVteVJrUXl5dFJMdEwrMzhUR3hreENmbG1PKzVaOENTU05ZN0dpZGpNSVo3UTR6TWpBMm4xbkdybFREa3p3RENzdyt3cUZQR1FBMTc5Y25mR1dPV1JWcnVqMTZ6Nlh5dnh2akp3Ynowd1FaNzVYSzV0S1NiN0ZOeWVJRXM0VFQ0amsrUzRkaFBlQVVDNXkrYkRZaXJZZ000R0M3dUVuenRuWnlhVldRN0IzODFBSzRRZHJ3dDUxWnFFeEtiUXBUVU5uK0VqcW9Ud3ZxTmo0a3F4NVFVQ0kwVGhTL1lrT3hKQ1htUFVXWmJoanBDZzU2aSsyYUI2Q21LMkpHaG41N0s1bWowTU5kQlhBNC9XbndINlhvUFdKeks1Tnl1MnpCM25BWnArUzVocFFzK3Axdk4xL3dzams9CmdpdGh1Yi5jb20gc3NoLWVkMjU1MTkgQUFBQUMzTnphQzFsWkRJMU5URTVBQUFBSU9NcXFua1Z6cm0wU2RHNlVPb3FLTHNhYmdINUM5b2tXaTBkaDJsOUdLSmw=
kind: Secret
metadata:
  name: flux-system
  namespace: flux-system
type: Opaque
---
apiVersion: source.toolkit.fluxcd.io/v1beta1
kind: GitRepository
metadata:
  name: flux-system
  namespace: flux-system
spec:
  interval: 1m0s
  ref:
    branch: master
  secretRef:
    name: flux-system
  url: ssh://git@github.com/binkhq/gitops
---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta1
kind: Kustomization
metadata:
  name: flux-system
  namespace: flux-system
spec:
  interval: 10m0s
  path: ./clusters/$CLUSTER_LOCATION-$CLUSTER_NAME
  prune: true
  sourceRef:
    kind: GitRepository
    name: flux-system
  validation: client
---
kind: ConfigMap
apiVersion: v1
metadata:
  name: cluster-vars
  namespace: flux-system
data:
  cluster_name: $CLUSTER_NAME
  cluster_location: $CLUSTER_LOCATION
  cluster_api_host: $CLUSTER_API_HOST
  cluster_lb_ip: $CLUSTER_LB_IP
  cluster_pls_ip: $CLUSTER_PLS_IP
  environment_keyvault: $ENVIRONMENT_KEYVAULT
  identity_kv_to_kube: $IDENTITY_KV_TO_KUBE
